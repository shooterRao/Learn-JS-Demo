<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <style>
    .panel {
      border-radius: 4px;
      overflow: hidden;
    }

    .panel-header {
      background-color: #2196F3;
      padding: 5px 10px;
      -webkit-user-select: none;
    }

    .panel-body {
      background-color: #e2dede;
      transition: height .3s;
      box-sizing: border-box;
    }

    .panel-inner {
      padding: 5px 10px;
    }
  </style>
</head>

<body>
  <div class="panel">
    <div class="panel-header" id="header">
      Lorem ipsum dolor sit.
    </div>
    <div class="panel-body" id="body">
      <div class="panel-inner">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque dignissimos, nisi quo cumque sed ab quod nobis voluptatum
        iusto rem, quis velit explicabo dolore adipisci. Nam culpa, minima earum odit! Lorem ipsum dolor sit amet, consectetur
        adipisicing elit. Voluptates corrupti labore velit, facere quas tenetur repellendus quae, minima incidunt exercitationem,
        nulla sequi ducimus itaque in explicabo. In est deleniti architecto.
      </div>
    </div>
  </div>
  <script>
    var header = document.querySelector('#header')
    var body = document.querySelector('#body')

    header.addEventListener('click', function () {
      var height = body.getBoundingClientRect().height
      console.log(height);
      if (!!height) {
        body.style.height = height + 'px'
        // var f = document.body.offsetHeight 
        // 上述操作是告诉浏览具体高度，才触发css的过渡动画
        // 方法1
        setTimeout(() => {
          // 下一个tick中执行，会有动画
          body.style.height = '0px'
        }, 0)
        // 方法2
        // var f = document.body.clientHeight; // 清空tick
        // body.style.height = '0'
      } else {
        // 设为auto/''后，才能计算出实际的高度
        body.style.height = ''
        height = body.getBoundingClientRect().height
        body.style.height = '0'
        // 更上述一样
        // console.log(document.body.clientHeight)
        // body.style.height = height + 'px'
        // var a = document.body.offsetHeight
        setTimeout(() => {
          body.style.height = height + 'px'
        }, 0)
      }
    })
  </script>
</body>

</html>